---
layout: base
---
<!-- Article title outside the layout as per CSS expectations -->
<h1 class="article-title">{{ article.title or title }}</h1>

<div class="article-layout" data-subject="{{ article.subjectNormalized or ((article.subject or subject or 'none') | lower | replace(' ', '-')) }}">
  <!-- Left side: Article content (takes remaining space) -->
  <div style="flex: 1;">
    <!-- Main article content -->
    <div class="article-page">
      <!-- Tags above the meta bar -->
      {% if article.tags and article.tags.length > 0 %}
        <div class="article-tags">
          {% for tag in article.tags %}
            <span class="tag">{{ tag }}</span>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Article meta bar above the main text -->
      <div class="article-meta-bar">
        {% if article.author and article.date %}
          <div class="article-author">{{ article.author }}</div>
          <div class="article-date">{{ article.date }}</div>
        {% endif %}
      </div>

      <div class="article-content">
        {{ content | safe }}
      </div>
      
      {% if article.citations and article.citations.length > 0 %}
        <div class="article-citations">
          <h4>References:</h4>
          <ul>
            {% for citation in article.citations %}
              <li>{{ citation }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Right side: Camera screen (flush with right edge) -->
  <div class="camera-screen" style="position: relative;">
    <img src="{{ '/images/bigcamerascreen.png' | url }}" alt="Camera Screen" class="camera-screen-img">
    <div class="camera-screen-cutout">
      {% if article.headerImage %}
        <img src="{{ article.headerImage | url }}" alt="{{ article.title }}" class="article-header-image">
      {% endif %}
    </div>
  </div>
</div>

<!-- Articles sidebar positioned below camera using CSS positioning -->
<div class="article-tiles-sidebar" data-subject="{{ article.subjectNormalized or ((article.subject or subject or 'none') | lower | replace(' ', '-')) }}" style="position: absolute; right: 0; top: calc(100vh - 50vh); width: 600px; max-width: 600px;">
  <div class="game-tag-filter-bar">
    <button class="game-tag-btn active" data-tag="all">All</button>
    {% set uniqueTags = [] %}
    {% for article in articles %}
      {% if article.tags %}
        {% for tag in article.tags %}
          {% if tag not in uniqueTags %}
            {% set uniqueTags = (uniqueTags.push(tag), uniqueTags) %}
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}
    {% for tag in uniqueTags %}
      <button class="game-tag-btn" data-tag="{{ tag }}">{{ tag }}</button>
    {% endfor %}
  </div>
  <div class="game-articles-list article-tiles-list" id="game-articles-list">
    {% for otherArticle in articles %}
      {% if otherArticle.id != (article.id or '') %}
        <div class="game-article-tile" data-tags="{{ otherArticle.tags | join(',') }}">
          <img src="{{ (otherArticle.headerImage or '/images/error.png') | url }}" alt="{{ otherArticle.title }}" class="tile-header-image" />
          <div class="tile-title">{{ otherArticle.title }}</div>
          <a href="{{ ('/articles/' + otherArticle.slug + '/') | url }}" class="tile-link"></a>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<!-- Include the article sidebar filter JavaScript -->
<script src="{{ '/js/article-sidebar-filter.js' | url }}"></script>
t